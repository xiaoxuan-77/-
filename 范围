-- ä¸€éµéš±è—å¤–æ›æŒ‰éˆ• v1.0
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- åˆªé™¤èˆŠæŒ‰éˆ•
if PlayerGui:FindFirstChild("HideToggleBtn") then
    PlayerGui.HideToggleBtn:Destroy()
end

-- å…¨å±€è®Šé‡
local isHidden = false
local hiddenUIs = {}  -- å„²å­˜éš±è—çš„UI

-- 1. å‰µå»ºéš±è—æŒ‰éˆ•ï¼ˆæ°¸é åœ¨æœ€ä¸Šå±¤ï¼‰
local hideBtn = Instance.new("ScreenGui")
hideBtn.Name = "HideToggleBtn"
hideBtn.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
hideBtn.DisplayOrder = 9999  -- æ°¸é åœ¨æœ€ä¸Šå±¤
hideBtn.Parent = PlayerGui

-- ä¸»æŒ‰éˆ•
local mainButton = Instance.new("TextButton")
mainButton.Name = "MainButton"
mainButton.Size = UDim2.new(0, 50, 0, 50)
mainButton.Position = UDim2.new(1, -60, 0, 20)  -- å³ä¸Šè§’
mainButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
mainButton.Text = "éš±è—"
mainButton.TextColor3 = Color3.fromRGB(255, 255, 255)
mainButton.TextSize = 14
mainButton.Font = Enum.Font.GothamBold
mainButton.AutoButtonColor = false
mainButton.ZIndex = 10000
mainButton.Parent = hideBtn

-- åœ“è§’
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(1, 0)  -- åœ“å½¢æŒ‰éˆ•
buttonCorner.Parent = mainButton

-- é™°å½±
local buttonShadow = Instance.new("UIStroke")
buttonShadow.Color = Color3.fromRGB(0, 0, 0)
buttonShadow.Thickness = 2
buttonShadow.Transparency = 0.3
buttonShadow.Parent = mainButton

-- 2. åŠŸèƒ½ï¼šéš±è—/é¡¯ç¤ºæ‰€æœ‰å¤–æ›UI
local function toggleAllUIs()
    isHidden = not isHidden
    
    if isHidden then
        -- éš±è—æ¨¡å¼
        mainButton.Text = "é¡¯ç¤º"
        mainButton.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
        
        -- éš±è—æ‰€æœ‰ScreenGuiï¼ˆé™¤äº†é€™å€‹æŒ‰éˆ•ï¼‰
        hiddenUIs = {}
        for _, gui in ipairs(PlayerGui:GetChildren()) do
            if gui:IsA("ScreenGui") and gui.Name ~= "HideToggleBtn" then
                hiddenUIs[gui] = gui.Enabled
                gui.Enabled = false
            end
        end
        
        print("ğŸ”´ æ‰€æœ‰å¤–æ›å·²éš±è—")
    else
        -- é¡¯ç¤ºæ¨¡å¼
        mainButton.Text = "éš±è—"
        mainButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
        
        -- æ¢å¾©æ‰€æœ‰UI
        for gui, wasEnabled in pairs(hiddenUIs) do
            if gui.Parent then
                gui.Enabled = wasEnabled
            end
        end
        hiddenUIs = {}
        
        print("ğŸŸ¢ æ‰€æœ‰å¤–æ›å·²é¡¯ç¤º")
    end
end

-- 3. æŒ‰éˆ•äº‹ä»¶
mainButton.MouseButton1Click:Connect(toggleAllUIs)

-- 4. æŒ‰éˆ•å‹•ç•«æ•ˆæœ
mainButton.MouseEnter:Connect(function()
    game:GetService("TweenService"):Create(mainButton, TweenInfo.new(0.2), {
        Size = UDim2.new(0, 55, 0, 55),
        BackgroundTransparency = 0
    }):Play()
end)

mainButton.MouseLeave:Connect(function()
    game:GetService("TweenService"):Create(mainButton, TweenInfo.new(0.2), {
        Size = UDim2.new(0, 50, 0, 50),
        BackgroundTransparency = 0
    }):Play()
end)

mainButton.MouseButton1Down:Connect(function()
    game:GetService("TweenService"):Create(mainButton, TweenInfo.new(0.1), {
        BackgroundColor3 = Color3.fromRGB(200, 80, 80)
    }):Play()
end)

mainButton.MouseButton1Up:Connect(function()
    if isHidden then
        game:GetService("TweenService"):Create(mainButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(100, 200, 100)
        }):Play()
    else
        game:GetService("TweenService"):Create(mainButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(255, 100, 100)
        }):Play()
    end
end)

-- 5. å¿«æ·éµæ”¯æŒï¼ˆF4éš±è—/é¡¯ç¤ºï¼‰
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    
    if input.KeyCode == Enum.KeyCode.F4 then
        toggleAllUIs()
    end
end)

-- 6. å¯æ‹–å‹•åŠŸèƒ½
local dragging = false
local dragStart
local startPos

mainButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainButton.Position
    end
end)

mainButton.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainButton.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

mainButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- 7. ç‹€æ…‹æŒ‡ç¤ºç‡ˆ
local statusIndicator = Instance.new("Frame")
statusIndicator.Name = "StatusIndicator"
statusIndicator.Size = UDim2.new(0, 10, 0, 10)
statusIndicator.Position = UDim2.new(1, -15, 1, -15)
statusIndicator.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
statusIndicator.BorderSizePixel = 0
statusIndicator.Parent = mainButton

local indicatorCorner = Instance.new("UICorner")
indicatorCorner.CornerRadius = UDim.new(1, 0)
indicatorCorner.Parent = statusIndicator

-- æ›´æ–°æŒ‡ç¤ºç‡ˆ
local function updateIndicator()
    if isHidden then
        statusIndicator.BackgroundColor3 = Color3.fromRGB(50, 255, 50)
    else
        statusIndicator.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    end
end

-- ç›£è½ç‹€æ…‹è®ŠåŒ–
mainButton:GetPropertyChangedSignal("Text"):Connect(updateIndicator)

-- 8. å·¥å…·æç¤º
local tooltip = Instance.new("TextLabel")
tooltip.Name = "Tooltip"
tooltip.Text = "é»æ“Šéš±è—/é¡¯ç¤ºæ‰€æœ‰å¤–æ›\nå¿«æ·éµ: F4"
tooltip.TextColor3 = Color3.fromRGB(255, 255, 255)
tooltip.TextSize = 12
tooltip.Size = UDim2.new(0, 120, 0, 40)
tooltip.Position = UDim2.new(0, 55, 0, 0)
tooltip.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
tooltip.BackgroundTransparency = 0.8
tooltip.Visible = false
tooltip.TextWrapped = true
tooltip.Parent = mainButton

local tooltipCorner = Instance.new("UICorner")
tooltipCorner.CornerRadius = UDim.new(0, 6)
tooltipCorner.Parent = tooltip

-- æ»‘é¼ æ‡¸åœé¡¯ç¤ºå·¥å…·æç¤º
mainButton.MouseEnter:Connect(function()
    tooltip.Visible = true
end)

mainButton.MouseLeave:Connect(function()
    tooltip.Visible = false
end)

-- 9. è‡ªå‹•æª¢æ¸¬ä¸¦è¨˜éŒ„UI
local function scanForUIs()
    -- æ¯5ç§’æƒæä¸€æ¬¡æ–°UI
    while true do
        task.wait(5)
        
        if isHidden then
            for _, gui in ipairs(PlayerGui:GetChildren()) do
                if gui:IsA("ScreenGui") and gui.Name ~= "HideToggleBtn" and not hiddenUIs[gui] then
                    hiddenUIs[gui] = gui.Enabled
                    gui.Enabled = false
                    print("ğŸ” ç™¼ç¾æ–°UIä¸¦éš±è—:", gui.Name)
                end
            end
        end
    end
end

-- å•Ÿå‹•æƒæ
coroutine.wrap(scanForUIs)()

print("ğŸ® ä¸€éµéš±è—æŒ‰éˆ•å·²è¼‰å…¥ï¼")
print("ğŸ“ ä½ç½®: ç•«é¢å³ä¸Šè§’ç´…è‰²åœ“å½¢æŒ‰éˆ•")
print("ğŸ¯ åŠŸèƒ½: é»æ“Šéš±è—/é¡¯ç¤ºæ‰€æœ‰å¤–æ›UI")
print("âŒ¨ï¸ å¿«æ·éµ: F4")

return hideBtn
